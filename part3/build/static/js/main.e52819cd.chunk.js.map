{"version":3,"sources":["components/Persons.js","components/Filter.js","components/PersonForm.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Persons","persons","deleteRecord","map","person","className","name","number","onClick","id","Filter","onChange","filter","value","PersonForm","onSubmit","data","newName","handleNameChange","newNumber","handleNumberChange","type","Notification","message","status","baseUrl","methods","getAll","axios","get","then","response","create","newObject","post","update","put","remove","delete","App","useState","setPersons","allPersons","setAllPersons","setNewName","setNewNumber","setFilter","setMessage","messageStatus","setMessageStatus","useEffect","personService","initialPersons","toLowerCase","includes","event","target","preventDefault","personObject","existingPerson","length","window","confirm","returnedPerson","setTimeout","catch","error","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e52819cd.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Persons = ({ persons, deleteRecord }) => {\r\n  return (\r\n    persons.map(person => \r\n      <div key={person.id}>\r\n        <span className='person'>{person.name} {person.number} </span>\r\n        <button onClick={() => deleteRecord(person.id, person.name)}>delete</button>\r\n      </div>\r\n    )\r\n  )\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Filter = ({ onChange, filter }) => {\r\n  return (\r\n    <div>filter shown with <input value={filter} onChange={onChange} /></div>\r\n  )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({ onSubmit, data }) => {\r\n  return (\r\n    <form onSubmit={onSubmit}>\r\n      <div>name: <input value={data.newName} onChange={data.handleNameChange} /></div>\r\n      <div>number: <input value={data.newNumber} onChange={data.handleNumberChange} /></div>\r\n      <div><button type=\"submit\">add</button></div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Notification = ({ message, status }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n    \r\n    return (\r\n      <div className={status}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default Notification","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response)\r\n}\r\n\r\nconst methods = { getAll, create, update, remove }\r\n\r\nexport default methods","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Notification from './components/Notification'\nimport personService from './services/persons'\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  const [allPersons, setAllPersons] = useState([]) \n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [message, setMessage] = useState('')\n  const [messageStatus, setMessageStatus] = useState('')\n  \n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n        setAllPersons(initialPersons)\n      })\n  }, [])\n\n  useEffect(() => {\n    filter !== ''\n    ? setPersons(allPersons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase())))\n    : personService\n        .getAll()\n        .then(initialPersons => {\n          setPersons(initialPersons)\n        })\n  }, [filter, allPersons])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n    const existingPerson = persons.filter(person => person.name === newName)\n\n    if (existingPerson.length > 0) {\n      const id = existingPerson[0].id\n      \n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        personService\n          .update(id, personObject)\n          .then(returnedPerson => {\n            setMessage(`${returnedPerson.name} number was updated!`)\n            setMessageStatus('success')\n\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n\n            setPersons(persons.map(person => person.id !== id ? person : returnedPerson))\n          })\n          .catch(error => {\n            setMessage(error.response.data.error)\n            setMessageStatus('error')\n\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n      }\n    } else {\n        personService\n          .create(personObject)\n          .then(returnedPerson => {\n            setMessage(`Added ${returnedPerson.name}`)\n            setMessageStatus('success')\n\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n\n            setAllPersons(allPersons.concat(returnedPerson))\n            setNewName('')\n            setNewNumber('')\n          })\n          .catch(error => {\n            setMessage(error.response.data.error)\n            setMessageStatus('error')\n  \n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n    }\n  }\n\n  const deleteRecord = (id, name) => {\n    if (window.confirm(`Delete ${name}?`)) {\n      personService\n        .remove(id)\n        .then(returnedPerson => {\n          setMessage(`Deleted ${name}`)\n          setMessageStatus('success')\n\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n\n          setPersons(persons.filter(person => person.id !== id))\n        })\n        .catch(error => {\n          setMessage(`The record of ${name} was already deleted from server`)\n          setMessageStatus('error')\n\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n          \n          setPersons(persons.filter(person => person.id !== id))\n        })\n    }\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n  }\n\n  return (\n    <>\n      <h1>Phonebook</h1>\n\n      <Notification message={message} status={messageStatus} />\n\n      <Filter onChange={handleFilterChange} filter={filter} />\n\n      <h2>Add a new</h2>\n\n      <PersonForm onSubmit={addPerson} data={{newName, newNumber, handleNameChange, handleNumberChange}} />\n\n      <h2>Numbers</h2>\n      \n      <Persons persons={persons} deleteRecord={deleteRecord} />\n    </>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App.js'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}